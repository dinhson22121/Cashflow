CREATE TABLE Userpf (
    ID SERIAL PRIMARY KEY,
    Username VARCHAR(255) NOT NULL,
    Password VARCHAR(255) NOT NULL,
    Email VARCHAR(255) NOT NULL,
    FirstName VARCHAR(100) NOT NULL,
    LastName VARCHAR(100) NOT NULL,
    PhoneNumber VARCHAR(20),
    Role VARCHAR(50),
    CreatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE Address (
    ID SERIAL PRIMARY KEY,
    Street VARCHAR(255) NOT NULL,
    City VARCHAR(100) NOT NULL,
    State VARCHAR(100) NOT NULL,
    ZipCode VARCHAR(20) NOT NULL
);


CREATE TABLE User_Address (
    user_id INTEGER REFERENCES Userpf(ID),
    address_id INTEGER REFERENCES Address(ID),
    PRIMARY KEY (user_id, address_id)
);


CREATE TABLE Investments (
    ID SERIAL PRIMARY KEY,
    Name VARCHAR(255) NOT NULL,
    InvestmentAmount NUMERIC NOT NULL,
    OwedAmount NUMERIC,
    InvestmentDate TIMESTAMP NOT NULL,
    InvestmentType VARCHAR(50) NOT NULL,
    UserID INTEGER REFERENCES Userpf(ID),
    CreatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);



CREATE TABLE Transactions (
    ID SERIAL PRIMARY KEY,
    InvestmentID INTEGER REFERENCES Investments(ID),
    TransactionType VARCHAR(50) NOT NULL,
    TransactionDate TIMESTAMP NOT NULL,
    Amount NUMERIC NOT NULL,
    Note TEXT,
    CreatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE Income (
    ID SERIAL PRIMARY KEY,
    UserID INTEGER REFERENCES Userpf(ID),
    IncomeType VARCHAR(50) NOT NULL,
    Amount NUMERIC NOT NULL,
    IncomeDate TIMESTAMP NOT NULL,
    CreatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE Salary (
    ID SERIAL PRIMARY KEY,
    UserID INTEGER REFERENCES Userpf(ID),
    Amount NUMERIC NOT NULL,
    SalaryDate TIMESTAMP NOT NULL,
    IncomeType VARCHAR(50) NOT NULL,
    CreatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE Loan (
    ID SERIAL PRIMARY KEY,
    UserID INTEGER REFERENCES Userpf(ID),
    LoanType VARCHAR(50) NOT NULL,
    Amount NUMERIC NOT NULL,
    LoanDate TIMESTAMP NOT NULL,
    InterestRate NUMERIC NOT NULL,
    DueDate TIMESTAMP,
    CreatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE AllocationSetup (
    ID SERIAL PRIMARY KEY,
    InvestmentType VARCHAR(50) NOT NULL,
    AllocationPercentage NUMERIC NOT NULL,
    UserID INTEGER REFERENCES Userpf(ID),
    CreatedAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);
